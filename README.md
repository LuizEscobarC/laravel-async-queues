# Laravel Async Queues: Estrat√©gias Comparativas

> **Projeto Educacional**: Implementa√ß√£o de diferentes estrat√©gias de filas ass√≠ncronas no Laravel para compara√ß√£o e estudo de arquiteturas de queue processing.

## üìã √çndice

1. [Vis√£o Geral](#vis√£o-geral)
2. [Projetos Inclu√≠dos](#projetos-inclu√≠dos)
3. [Instala√ß√£o e Setup](#instala√ß√£o-e-setup)
4. [Como Testar](#como-testar)
5. [Compara√ß√£o de Estrat√©gias](#compara√ß√£o-de-estrat√©gias)
6. [Conceitos Aplicados](#conceitos-aplicados)
7. [An√°lise de Trade-offs](#an√°lise-de-trade-offs)
8. [Cen√°rios de Uso](#cen√°rios-de-uso)
9. [Recursos de Aprendizado](#recursos-de-aprendizado)

---

## üéØ Vis√£o Geral


Este reposit√≥rio cont√©m duas implementa√ß√µes distintas de **filas ass√≠ncronas** no Laravel, cada uma seguindo uma estrat√©gia arquitetural diferente:

1. **supervisor-horizon**: Container √∫nico com Supervisor gerenciando Horizon
2. **docker-queue-balance**: Containers separados com balanceamento autom√°tico

O objetivo √© demonstrar e comparar diferentes abordagens para processamento ass√≠ncrono, permitindo an√°lise pr√°tica de trade-offs arquiteturais.

### Dataset de Teste

Ambos os projetos processam dados clim√°ticos em CSV:
- `data.csv`: 1000+ registros de temperatura
- `low-size-data.csv`: 99 registros para testes r√°pidos

---

## üì¶ Projetos Inclu√≠dos

### 1. Supervisor + Horizon (`supervisor-horizon/`)

**Estrat√©gia**: Monolito gerenciado por Supervisor

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           Container Laravel         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ         Supervisor              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ   Horizon   ‚îÇ ‚îÇ Laravel    ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ   Workers   ‚îÇ ‚îÇ   Serve    ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                    ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  Redis  ‚îÇ         ‚îÇ  SQLite  ‚îÇ
    ‚îÇ (Queue) ‚îÇ         ‚îÇ  (Data)  ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Caracter√≠sticas**:
- ‚úÖ Setup simples e r√°pido
- ‚úÖ Dashboard integrado (Horizon)
- ‚úÖ Ideal para desenvolvimento
- ‚ùå Escalabilidade limitada

### 2. Docker Queue Balance (`docker-queue-balance/`)

**Estrat√©gia**: Microservices com containers especializados

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Web     ‚îÇ  ‚îÇ   Worker    ‚îÇ  ‚îÇ   Worker    ‚îÇ
‚îÇ Container  ‚îÇ  ‚îÇ Container 1 ‚îÇ  ‚îÇ Container 2 ‚îÇ
‚îÇ            ‚îÇ  ‚îÇ             ‚îÇ  ‚îÇ             ‚îÇ
‚îÇ HTTP APIs  ‚îÇ  ‚îÇ Queue:high  ‚îÇ  ‚îÇQueue:default‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ               ‚îÇ               ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
               ‚îÇ     Redis     ‚îÇ
               ‚îÇ (Message Bus) ‚îÇ
               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
               ‚îÇ   Database    ‚îÇ
               ‚îÇ   (MySQL)     ‚îÇ
               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Caracter√≠sticas**:
- ‚úÖ Escalabilidade horizontal
- ‚úÖ Isolamento de recursos
- ‚úÖ Fault tolerance
- ‚ùå Maior complexidade

---

## üöÄ Instala√ß√£o e Setup

### Pr√©-requisitos

```bash
# Verificar se tem Docker e Docker Compose
docker --version          # >= 20.10
docker-compose --version  # >= 2.0
```

### Clone do Reposit√≥rio

```bash
git clone <repository-url>
cd laravel-async-queues
```

### Setup do Projeto 1: Supervisor + Horizon

```bash
# Navegar para o projeto
cd supervisor-horizon/

# Subir containers
docker-compose up -d

# Verificar se containers est√£o rodando
docker-compose ps

# Verificar logs do Supervisor
docker-compose logs -f app
```

**Servi√ßos dispon√≠veis:**
- üåê **Laravel App**: http://localhost:8000
- üìä **Horizon Dashboard**: http://localhost:8000/horizon
- üî¥ **Redis**: localhost:6380

### Setup do Projeto 2: Docker Queue Balance

```bash
# Navegar para o projeto
cd docker-queue-balance/

# Subir containers
docker-compose up -d

# Verificar se containers est√£o rodando
docker-compose ps

# Verificar logs dos workers
docker-compose logs -f worker-high-priority
docker-compose logs -f worker-default
```

**Servi√ßos dispon√≠veis:**
- üåê **Laravel App**: http://localhost:8001
- üî¥ **Redis**: localhost:6381
- üóÑÔ∏è **MySQL**: localhost:3307

---

## üß™ Como Testar

### Teste 1: Supervisor + Horizon

```bash
cd supervisor-horizon/

# 1. Processar dataset pequeno
docker-compose exec app php artisan process:csv-data --file=low-size-data.csv --batch-size=2

# 2. Monitorar via Horizon Dashboard
# Abrir: http://localhost:8000/horizon

# 3. Verificar dados salvos
docker-compose exec app php artisan tinker --execute="
echo 'Total records: ' . App\Models\TemperatureReading::count();
"

# 4. Processar dataset grande
docker-compose exec app php artisan process:csv-data --file=../data.csv --batch-size=10

# 5. An√°lise de performance
# - Acessar Horizon ‚Üí Metrics
# - Observar throughput e lat√™ncia
# - Verificar utiliza√ß√£o de workers
```

### Teste 2: Docker Queue Balance

```bash
cd docker-queue-balance/

# 1. Processar com balanceamento autom√°tico
docker-compose exec web php artisan process:csv-data --file=../low-size-data.csv --batch-size=3

# 2. Monitorar workers separadamente
# Terminal 1:
docker-compose logs -f worker-high-priority

# Terminal 2:
docker-compose logs -f worker-default

# 3. Verificar distribui√ß√£o de carga
docker-compose exec web php artisan queue:monitor

# 4. Teste de escalabilidade
docker-compose up -d --scale worker-default=3

# 5. Processar dataset grande
docker-compose exec web php artisan process:csv-data --file=../data.csv --batch-size=5
```

### Testes de Stress

```bash
# Teste 1: Alto volume de jobs pequenos
--batch-size=1  # Gera mais jobs

# Teste 2: Jobs pesados
--batch-size=50 # Menos jobs, mais dados por job

# Teste 3: Concorr√™ncia
# Executar m√∫ltiplos comandos simultaneamente
```

### Verifica√ß√£o de Resultados

```bash
# Supervisor + Horizon
cd supervisor-horizon/
docker-compose exec app php artisan tinker --execute="
\$total = App\Models\TemperatureReading::count();
\$avg = App\Models\TemperatureReading::avg('temperatura');
echo \"Total: \$total | Avg Temp: \$avg¬∞C\";
"

# Docker Queue Balance
cd docker-queue-balance/
docker-compose exec web php artisan tinker --execute="
\$total = App\Models\TemperatureReading::count();
\$avg = App\Models\TemperatureReading::avg('temperatura');
echo \"Total: \$total | Avg Temp: \$avg¬∞C\";
"
```

---

## ‚öñÔ∏è Compara√ß√£o de Estrat√©gias

### Caracter√≠sticas T√©cnicas

| Aspecto | Supervisor + Horizon | Docker Queue Balance |
|---------|---------------------|---------------------|
| **Arquitetura** | Monol√≠tica | Microservices |
| **Containers** | 2 (app + redis) | 5+ (web + workers + db + redis) |
| **Escalabilidade** | Vertical apenas | Horizontal + Vertical |
| **Isolamento** | Processos compartilhados | Containers isolados |
| **Dashboard** | Horizon nativo | Logs distribu√≠dos |
| **Persist√™ncia** | SQLite | MySQL |
| **Complexidade Setup** | üü¢ Baixa | üü° M√©dia |
| **Troubleshooting** | üü¢ Simples | üî¥ Complexo |

### Performance

| M√©trica | Supervisor + Horizon | Docker Queue Balance |
|---------|---------------------|---------------------|
| **Time to Start** | ~30s | ~60s |
| **Memory Usage** | ~200MB | ~400MB |
| **Throughput** | 50-100 jobs/min | 100-300 jobs/min |
| **Lat√™ncia** | Baixa | M√©dia |
| **Resource Efficiency** | üü° M√©dia | üü¢ Alta |

### Cen√°rios Ideais

#### Supervisor + Horizon ‚úÖ
- **Desenvolvimento local**
- **Prototipagem r√°pida**
- **Aplica√ß√µes pequenas-m√©dias**
- **Equipes pequenas**
- **Budget limitado**

#### Docker Queue Balance ‚úÖ
- **Produ√ß√£o enterprise**
- **Alto volume de dados**
- **Scaling requirements**
- **Fault tolerance cr√≠tica**
- **Equipes DevOps maduras**

---

## üìö Conceitos Aplicados

### 1. Queue Processing Patterns

#### **Producer-Consumer Pattern**
```php
// Producer (Controller/Command)
ProcessCsvDataJob::dispatch($data);

// Consumer (Worker)
class ProcessCsvDataJob {
    public function handle() { /* process */ }
}
```

#### **Batch Processing**
```php
// Chunking para otimiza√ß√£o
$batches = array_chunk($csvData, $batchSize);
foreach ($batches as $batch) {
    ProcessCsvDataJob::dispatch($batch);
}
```

### 2. Container Orchestration

#### **Single Container Strategy**
```yaml
# supervisor-horizon
services:
  app:        # Laravel + Supervisor + Horizon
  redis:      # Message broker
```

#### **Multi-Container Strategy**
```yaml
# docker-queue-balance
services:
  web:                    # HTTP interface
  worker-high-priority:   # Critical jobs
  worker-default:         # Normal jobs
  worker-low-priority:    # Background jobs
  redis:                  # Message broker
  mysql:                  # Data persistence
```

### 3. Load Balancing Strategies

#### **Auto-balancing (Horizon)**
```php
'balance' => 'auto',
'autoScalingStrategy' => 'time',
'maxProcesses' => 5,
```

#### **Manual Queue Assignment**
```php
// Distribui√ß√£o manual por prioridade
ProcessCsvDataJob::dispatch($data)->onQueue('high-priority');
ProcessCsvDataJob::dispatch($data)->onQueue('default');
ProcessCsvDataJob::dispatch($data)->onQueue('low-priority');
```

### 4. Monitoring & Observability

#### **Centralized (Horizon)**
- Dashboard √∫nico
- M√©tricas agregadas
- Real-time monitoring

#### **Distributed (Docker Logs)**
- Logs por container
- Agrega√ß√£o manual necess√°ria
- Tools externos para observabilidade

### 5. Data Persistence Patterns

#### **Local File Storage (SQLite)**
```php
DB_CONNECTION=sqlite
DB_DATABASE=/var/www/database/database.sqlite
```

#### **Network Database (MySQL)**
```php
DB_CONNECTION=mysql
DB_HOST=mysql
DB_DATABASE=laravel_queues
```

### 6. Process Management

#### **Supervisor Process Control**
```ini
[program:laravel-horizon]
command=php artisan horizon
autostart=true
autorestart=true
```

#### **Docker Container Lifecycle**
```bash
# Scaling workers
docker-compose up -d --scale worker-default=3

# Health checks
healthcheck:
  test: ["CMD", "php", "artisan", "queue:monitor"]
```

---

## üîÑ An√°lise de Trade-offs

### Development Experience

| Aspecto | Supervisor + Horizon | Docker Queue Balance |
|---------|---------------------|---------------------|
| **Tempo de Setup** | üü¢ 5 minutos | üü° 15 minutos |
| **Hot Reload** | üü¢ Simples | üü° Rebuild containers |
| **Debugging** | üü¢ Um processo | üî¥ M√∫ltiplos containers |
| **Local Testing** | üü¢ Ideal | üü° Resource intensive |

### Production Readiness

| Aspecto | Supervisor + Horizon | Docker Queue Balance |
|---------|---------------------|---------------------|
| **Fault Tolerance** | üî¥ Single point failure | üü¢ Distributed |
| **Scaling** | üî¥ Vertical only | üü¢ Horizontal |
| **Resource Isolation** | üî¥ Shared | üü¢ Isolated |
| **Monitoring** | üü¢ Built-in | üü° External tools needed |

### Operational Complexity

| Aspecto | Supervisor + Horizon | Docker Queue Balance |
|---------|---------------------|---------------------|
| **Deployment** | üü¢ Single unit | üî¥ Coordinated deploy |
| **Rollback** | üü¢ Simple | üî¥ Complex |
| **Backup Strategy** | üü¢ File-based | üü° Database-based |
| **Security** | üü° Shared container | üü¢ Network isolation |

---

## üéØ Cen√°rios de Uso

### Startup/MVP (Supervisor + Horizon)

```bash
# Cen√°rio: E-commerce pequeno processando pedidos
# Volume: 100-1000 pedidos/dia
# Team: 2-5 desenvolvedores
# Budget: Limitado

Benef√≠cios:
‚úÖ Deploy r√°pido
‚úÖ Costs baixos
‚úÖ Simplicidade operacional
‚úÖ Dashboard out-of-the-box
```

### Empresa M√©dia (H√≠brido)

```bash
# Cen√°rio: SaaS B2B com m√∫ltiplos clientes
# Volume: 10k-100k jobs/dia
# Team: 10-20 desenvolvedores
# Budget: M√©dio

Estrat√©gia:
üîÑ Dev: Supervisor + Horizon
üîÑ Staging: Docker Queue Balance
üîÑ Prod: Kubernetes + Horizon
```

### Enterprise (Docker Queue Balance)

```bash
# Cen√°rio: Plataforma de an√°lise de dados
# Volume: 1M+ jobs/dia
# Team: 50+ desenvolvedores
# Budget: Alto

Benef√≠cios:
‚úÖ Auto-scaling
‚úÖ Multi-region deployment
‚úÖ Disaster recovery
‚úÖ Compliance & security
```

### Casos Espec√≠ficos

#### **Data Processing Pipeline**
```php
// Volume alto, processamento pesado
docker-queue-balance/ ‚Üê Escolha ideal
- Workers especializados
- Scaling horizontal
- Fault tolerance
```

#### **Real-time Notifications**
```php
// Lat√™ncia baixa, volume m√©dio
supervisor-horizon/ ‚Üê Escolha ideal
- Response time baixo
- Simplicidade
- Dashboard monitoring
```

#### **Background Analytics**
```php
// Processamento batch, n√£o-cr√≠tico
supervisor-horizon/ ‚Üê Escolha ideal
- Cost-effective
- Setup simples
- Monitoring integrado
```

---

## üìà Recursos de Aprendizado

### Hands-on Exercises

#### **Exerc√≠cio 1: Performance Comparison**
```bash
# 1. Processar mesmo dataset em ambos projetos
# 2. Medir tempo de execu√ß√£o
# 3. Comparar resource usage
# 4. Analisar throughput

# M√©tricas a coletar:
- Jobs processed per minute
- Memory usage peak
- CPU utilization
- Error rate
```

#### **Exerc√≠cio 2: Failure Scenarios**
```bash
# 1. Simular falhas de container
docker-compose stop redis

# 2. Observar comportamento
# 3. Testar recovery
# 4. Documentar lessons learned
```

#### **Exerc√≠cio 3: Scaling Tests**
```bash
# 1. Aumentar workers gradualmente
# 2. Medir impact na performance
# 3. Identificar bottlenecks
# 4. Determinar optimal configuration
```

### Conceitos para Aprofundar

#### **Message Queue Theory**
- AMQP vs Redis Streams
- At-least-once vs Exactly-once delivery
- Message ordering guarantees
- Dead letter queues

#### **Container Orchestration**
- Docker Swarm vs Kubernetes
- Service discovery
- Load balancing algorithms
- Health checks & rolling deployments

#### **Distributed Systems**
- CAP Theorem aplicado
- Eventual consistency
- Circuit breaker pattern
- Bulkhead isolation

#### **Observability**
- Metrics vs Logs vs Traces
- SLIs, SLOs, SLAs
- Error budgets
- Alerting strategies

### Pr√≥ximos Passos

#### **Implementa√ß√µes Avan√ßadas**
1. **Kubernetes Deployment**
   - Helm charts
   - HPA (Horizontal Pod Autoscaler)
   - Service mesh (Istio)

2. **Monitoring Stack**
   - Prometheus + Grafana
   - ELK Stack
   - Jaeger tracing

3. **CI/CD Pipeline**
   - GitHub Actions
   - Blue-green deployment
   - Canary releases

#### **Padr√µes Empresariais**
1. **Event Sourcing**
2. **CQRS (Command Query Responsibility Segregation)**
3. **Saga Pattern**
4. **Event-driven Architecture**

---

## üèÅ Conclus√£o

Este reposit√≥rio oferece uma **compara√ß√£o pr√°tica** entre duas estrat√©gias fundamentais de processamento ass√≠ncrono:

### **üéØ Para Aprendizado:**
- Compare implementa√ß√µes lado a lado
- Teste diferentes cen√°rios de carga
- Analise trade-offs na pr√°tica
- Entenda quando usar cada abordagem

### **üöÄ Para Projetos Reais:**
- Use `supervisor-horizon/` para MVPs e desenvolvimento
- Use `docker-queue-balance/` para aplica√ß√µes enterprise
- Considere h√≠brido: dev simple, prod distributed

### **ÔøΩ Para Carreira:**
- Dom√≠nio de patterns fundamentais
- Experi√™ncia com Docker e containers
- Conhecimento de trade-offs arquiteturais
- Base para tecnologias avan√ßadas (Kubernetes, etc)

**üí° Lembre-se**: N√£o existe "bala de prata" - cada estrat√©gia tem seu lugar dependendo do contexto, equipe, budget e requirements.

---

**üéì Happy Learning!** 

Para d√∫vidas espec√≠ficas, consulte os READMEs individuais de cada projeto ou abra uma issue no reposit√≥rio.

### Projeto docker-queue-balance

```bash
cd docker-queue-balance

# 1. Instalar depend√™ncias
composer install

# 2. Configurar environment
cp .env.example .env
php artisan key:generate

# 3. Executar migrations
php artisan migrate

# 4. Subir os containers (Redis + Workers de filas)
docker-compose up -d

# 5. Processar o arquivo CSV
php artisan process:csv-data --batch-size=10

# 6. Monitorar os logs dos containers
docker-compose logs -f queue-high
docker-compose logs -f queue-default  
docker-compose logs -f queue-low
```

### Projeto supervisor-horizon

```bash
cd supervisor-horizon

# 1. Subir containers (Redis + App com Supervisor)
docker-compose up -d

# 2. Inicializar projeto
./init.sh

# 3. Processar o arquivo CSV
docker exec supervisor-app php artisan process:csv-data --batch-size=10

# 4. Monitorar
# Dashboard: http://localhost:8000/horizon
# Logs: docker exec supervisor-app tail -f storage/logs/horizon.log
# Status: docker exec supervisor-app supervisorctl status
```

---

## üìä Dados de Exemplo

O arquivo `data.csv` cont√©m dados clim√°ticos simulados:
- **data**: timestamp da leitura
- **temperatura**: valor da temperatura

Exemplo:
```csv
data,temperatura
2022-01-01 00:00:00,3.1
2022-01-01 00:05:00,1.7
...
```

---

## üîç Diferen√ßas dos Conceitos

### Docker Queue Balance
- ‚úÖ Controle granular por fila
- ‚úÖ Isolamento completo por container
- ‚úÖ Escalabilidade horizontal simples
- ‚úÖ Workers dedicados por fila
- ‚ùå Configura√ß√£o manual
- ‚ùå Sem interface gr√°fica

### Supervisor + Horizon
- ‚úÖ Gerenciamento autom√°tico e inteligente
- ‚úÖ Interface web rica com m√©tricas
- ‚úÖ Auto-scaling baseado em carga
- ‚úÖ Configura√ß√£o simplificada
- ‚úÖ Docker apenas para Redis
- ‚ùå Depend√™ncia do Horizon
- ‚ùå Overhead adicional

---

## üìà Monitoramento

### Docker Queue Balance
```bash
# Ver status dos containers
docker-compose ps

# Logs em tempo real
docker-compose logs -f

# Ver jobs nas filas (Redis)
docker-compose exec redis redis-cli
> LLEN laravel_database_queue:high-priority
> LLEN laravel_database_queue:default
> LLEN laravel_database_queue:low-priority
```

### Supervisor + Horizon
- Dashboard: `http://localhost:8000/horizon`
- M√©tricas em tempo real
- Jobs processados
- Falha de jobs
- Throughput por fila

---

## üõ†Ô∏è Arquitetura

### Docker Queue Balance
```
CSV ‚Üí Laravel Command ‚Üí Jobs ‚Üí Filas Espec√≠ficas ‚Üí Containers Workers ‚Üí Database
                                    ‚Üì
                               [high-priority]  ‚Üí Container 1
                               [default]        ‚Üí Container 2  
                               [low-priority]   ‚Üí Container 3
```

### Supervisor + Horizon
```
CSV ‚Üí Laravel Command ‚Üí Jobs ‚Üí Horizon Auto-Scaler ‚Üí Dynamic Workers ‚Üí Database
                                   ‚Üì
                              [Uma fila 'default']
                              [1-5 workers din√¢micos]
                              [Supervisor + Horizon em container]
```

